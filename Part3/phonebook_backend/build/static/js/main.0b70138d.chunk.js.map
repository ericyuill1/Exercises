{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Notification.js","components/Error.js","services/Names.js","App.js","index.js"],"names":["Filter","props","value","newFilter","onChange","handleFilterChange","PersonForm","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","Notification","message","className","Error","baseUrl","axios","get","newObject","post","id","delete","refreshPage","window","location","reload","Persons","persons","map","note","key","filteredList","length","Note","name","onClick","confirm","console","log","_id","noteService","number","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","setNewList","addMessage","setAddMessage","errorMessage","setErrorMessage","useEffect","then","response","data","event","target","filter","person","toLowerCase","includes","preventDefault","checkNumber","nameObject","Math","max","some","alert","match","replaceObject","setTimeout","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0b70138d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n  \r\n    return (\r\n      <div>\r\n        <p>\r\n          filter shown with <input value = {props.newFilter}\r\n          onChange = {props.handleFilterChange}/>\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n  \r\n    return (\r\n      <form onSubmit = {props.addName}>\r\n          \r\n            <tr>\r\n              <td>\r\n            name: <input value = {props.newName}\r\n            onChange = {props.handleNameChange}/>\r\n              </td>\r\n              <td>\r\n            number: <input value = {props.newNumber}\r\n            onChange = {props.handleNumberChange}/>\r\n              </td>\r\n            </tr>\r\n          \r\n          <div>\r\n            <button type=\"submit\">add</button>\r\n          </div>\r\n        </form>\r\n    )\r\n  }\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"added\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst Error = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst rid = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  rid: rid\r\n}","import React, {useState, useEffect} from 'react'\r\nimport Filter from \"./components/Filter\"\r\nimport PersonForm from \"./components/PersonForm\"\r\nimport Notification from \"./components/Notification\"\r\nimport Error from \"./components/Error\"\r\nimport noteService from './services/Names'\r\n\r\nconst refreshPage = () => {\r\n  window.location.reload(false);\r\n}\r\n\r\nconst Persons = (props) => {\r\n\r\n  if (props.newFilter === '') {\r\n    return (\r\n      <div>\r\n        {props.persons.map(note =>\r\n          <Note key = {note.id} note = {note} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (props.filteredList.length === 0) {\r\n    return (\r\n      <div>\r\n        no items match your search\r\n      </div>\r\n    )\r\n  }\r\n\r\n    return (\r\n      <div>\r\n        {props.filteredList.map(note =>\r\n          <Note key = {note.id} note = {note} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Note = ({ note }) => {\r\n\r\n  const cease = () => {\r\n    //console.log(persons)\r\n\r\n    if (window.confirm(\"Delete \" + note.name + \"?\")) {\r\n      console.log(\"to delete\", note._id)\r\n      //console.log(persons)\r\n        noteService\r\n          .rid(note._id)\r\n        noteService\r\n          .getAll()\r\n        refreshPage()\r\n        \r\n      }\r\n\r\n    return\r\n\r\n    }\r\n\r\n  return (\r\n    <div>\r\n      <tr>\r\n        <td>\r\n          {note.name}\r\n        </td>\r\n        <td>\r\n          <button onClick = {cease}>\r\n            delete\r\n          </button>\r\n        </td>\r\n      </tr>\r\n        {note.number}\r\n        <p>\r\n        </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newFilter, setNewFilter ] = useState('')\r\n  const [ filteredList, setNewList ] = useState([])\r\n  const [addMessage, setAddMessage] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    noteService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n      })\r\n  }, [])\r\n\r\n  const hook = () => {\r\n    console.log('effect')\r\n    noteService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response.data)\r\n      })\r\n  }\r\n  \r\n  useEffect(hook, [])\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const checkPerson = (person) => person.name === newName\r\n    const checkNumber = (person) => person.number == newNumber\r\n\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: Math.max(persons.id) + 1\r\n    }\r\n    console.log(persons)\r\n    console.log(persons.some(checkNumber))\r\n    if (persons.some(checkNumber)) {\r\n      window.alert(newNumber + ' is already in use')\r\n      setNewName('')\r\n      setNewNumber('')\r\n      return\r\n    }\r\n\r\n    if (persons.some(checkPerson)) {\r\n      const match = persons.filter(person => person.name.includes(newName))\r\n      console.log(\"match\", match)\r\n      console.log(\"match.id\", match[0]._id)\r\n      if (window.confirm(newName + ' is already added to the phonebook, replace the old number with the new one?')) {\r\n        \r\n        const replaceObject = {\r\n          name: match[0].name,\r\n          number: newNumber,\r\n          id: match[0]._id\r\n        }\r\n\r\n        console.log(\"replace\", replaceObject)\r\n\r\n        noteService\r\n          .rid(match[0]._id)\r\n        noteService\r\n          .create(replaceObject)\r\n      \r\n            setAddMessage(\r\n              `Updating ${nameObject.name}'s number`\r\n            )\r\n            setTimeout(() => {\r\n              setAddMessage(null)\r\n              refreshPage()\r\n            }, 1000)\r\n          }\r\n          return\r\n        }\r\n          \r\n\r\n    // if (persons.some(checkNumber)) {\r\n    //   window.alert(newNumber + ' is already in use')\r\n    //   setNewName('')\r\n    //   setNewNumber('')\r\n    //   return\r\n    // }\r\n    \r\n    noteService\r\n      .create(nameObject)\r\n      .then(response => {\r\n        setPersons(persons.concat(response.data))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setAddMessage(\r\n          `Added '${nameObject.name}'`\r\n        )\r\n        setTimeout(() => {\r\n          setAddMessage(null)\r\n        }, 5000)\r\n      }).catch(error => {\r\n        console.log(error)\r\n        setErrorMessage(\r\n          'Person validation failed: required name length: >2, required number length: >7'\r\n        )\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n        })\r\n      \r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n    let filteredList = persons.filter(person => \r\n      person.name.toLowerCase().includes(event.target.value.toLowerCase()))\r\n    setNewList(filteredList)\r\n    console.log(filteredList)\r\n  }\r\n\r\n  console.log(\"newFilter: \", newFilter)\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={addMessage}/>\r\n      <Error message={errorMessage}/>\r\n      <Filter newFilter = {newFilter} handleFilterChange = {handleFilterChange}/>\r\n      <PersonForm addName = {addName} newName = {newName} \r\n        handleNameChange = {handleNameChange} newNumber = {newNumber} \r\n        handleNumberChange = {handleNumberChange}/>\r\n      <h3>Numbers</h3>\r\n      <Persons persons = {persons} newFilter = {newFilter} filteredList = {filteredList}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from \"./App\"\nimport './index.css'\nimport './inde.css'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}